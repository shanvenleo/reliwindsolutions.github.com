define(["jquery","appconfig","wsbcore/helper","js!//api.mapbox.com/mapbox.js/v2.4.0/mapbox.js","css!//api.mapbox.com/mapbox.js/v2.4.0/mapbox.css"],function(e,o){function a(o,a){e.getJSON(o,function(e){e&&a(JSON.stringify(e))})}function n(e,o){c[e]=o}function t(e){return c[e]}function r(o,r,i,s,d){o&&o._leaflet&&(e(o).find(".leaflet-map-pane").remove(),e(o).find(".leaflet-control-container").remove(),o._leaflet=!1),""===r.trim()&&(r=p.address);var c=p.apiKey||s,m=p.apiurl.replace("{0}",encodeURIComponent(r))+c,f=t(r);f?l(o,r,[f.features[0].center[0],f.features[0].center[1]],i,s,d):a(m,function(e){f=JSON.parse(e),f&&f.features[0]&&(n(r,f),l(o,r,[f.features[0].center[0],f.features[0].center[1]],i,s,d))})}function l(o,a,n,t,r,l){if(!o)return void s();a&&n||(a=p.address,n=p.defaultCordinates);var d=null,c=n[0],m=n[1],f={container:o,style:"mapbox://styles/mapbox/streets-v9",zoom:14,center:n,bufferSize:128},u=e.extend({},f,t||{});if(L.mapbox.accessToken=p.apiKey||r,o){o._leaflet&&(e(o).find(".leaflet-map-pane").remove(),e(o).find(".leaflet-control-container").remove(),o._leaflet=!1),d=L.mapbox.map(o,"mapbox.streets",{zoomControl:!1,legendControl:{position:"topleft"}}).setView([m,c],u.zoom);var b=new L.Marker(new L.LatLng(m,c));d.addLayer(b),d.invalidateSize(),d.legendControl.addLegend(i(a)),L.control.zoom({position:"bottomleft"}).addTo(d),l?(e(".map-legends").addClass("mapbox-legend-padding"),e(".map-legend").addClass("mapbox-legend-padding"),e(".leaflet-control-zoom").addClass("mapbox-leaflet-zoom-control-bottom")):(d.dragging.disable(),d.touchZoom.disable(),d.doubleClickZoom.disable(),d.scrollWheelZoom.disable(),e(".map-legends").addClass("mapbox-legend-padding mapbox-avoid-clicks"),e(".map-legend").addClass("mapbox-legend-padding mapbox-avoid-clicks"),e(".leaflet-control-zoom").addClass("mapbox-leaflet-zoom-control-bottom mapbox-avoid-clicks"),e(".leaflet-control-attribution").addClass("mapbox-avoid-clicks"))}}function i(o){var a=e("<div></div>",{text:o,css:{margin:"0px",padding:"5px",background:"white",color:"black",border:"1px solid black","line-height":"initial"}});return a.get(0).outerHTML}function s(){require(["/i18n/resources/client","wsbcore/growl"],function(o){e("<div></div>").sfGrowl({title:o.resources.Client__Designer__Yikes_hit_a_snag,content:o.resources.Server__There_has_been_an_unexpected_error,icon:"error"})})}function d(e,o){var n="";e&&""!=e.trim()?a(p.apiurl.replace("{0}",encodeURIComponent(e))+p.apiKey,function(e){var a=JSON.parse(e);if(a&&a.features[0]){var t=a.features[0].place_name;o(t)}else o(n)}):o(n)}var c={},p={language:"en_US",apiKey:o.mapboxApiKey,address:"Scottsdale, Arizona, US",zoom:14,defaultCordinates:[-111.8992,33.5091],apiurl:"https://api.mapbox.com/geocoding/v5/mapbox.places/{0}.json?access_token="};return{generateMap:r,getAddressAutoComplete:function(e,o){a(p.apiurl.replace("{0}",encodeURIComponent(e))+p.apiKey,o)},getCustomFormAddressAutoComplete:function(e,o,n){a(p.apiurl.replace("{0}",encodeURIComponent(e))+o,n)},getClosestStreetAddress:function(e,o){d(e,o)}}});
//# sourceMappingURL=mapbox.js.map